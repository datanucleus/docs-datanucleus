<?xml version="1.0" encoding="iso-8859-1"?>
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
    <properties>
        <title>PluginPoints : MetaData Entity Resolver</title>
    </properties>

    <body>
        <section name="PluginPoints : MetaData Entity Resolver">
            <img src="../../images/nucleus_plugin.gif" border="0" alt=""/>
            <p>
                DataNucleus provides a pluggable framework whereby you can plug in your own DTD or XSD schema support.
                You can extend DataNucleus's capabilities using the plugin extension <i>org.datanucleus.metadata_entityresolver</i>.
            </p>
            <p>
                An Entity Resolver extension point configuration is a list of XSDs schemas or DTDs.
                For XSD schemas, it needs only the schema location (URL in classpath), since the XML parser will take care of association 
                of XML elements and namespaces to the schemas types. For DTDs, it's a little less obvious since DTDs are not namespace aware, so
                the configuration must contain the URL location (location in classpath), DTD DOCTYPE (PUBLIC or SYSTEM), and the DTD identity. 
            </p>
            <p>
                An Entity Resolver has close relationship to the <a href="metadata_handler.html">MetaData Handler</a> extension point, since
                the MetaData Handler uses the Entity Resolvers to validate XML files. However, the Entity Resolvers configured via this plugin
                are only applicable to the <i>org.datanucleus.metadata.xml.PluginEntityResolver</i> instances, so the MetaData Handler must
                use the <i>PluginEntityResolver</i> Entity Resolver if it wants to use the schemas configured in this extension point. 
            </p>
            <subsection name="Implementation">
	            <p>
	            	The Entity Resolver implementation must extend the <i>org.datanucleus.util.AbstractXMLEntityResolver</i> class and must
	            	have a public constructor that takes the <i>org.datanucleus.plugin.PluginManager</i> class.  
	            </p>
<source>
import org.datanucleus.plugin.PluginManager;
import org.datanucleus.util.AbstractXMLEntityResolver;

/**
 * Implementation of an entity resolver for DTD/XSD files.
 * Handles entity resolution for files configured via plugins.
 */
public class PluginEntityResolver extends AbstractXMLEntityResolver
{
    public PluginEntityResolver(PluginManager pm)
    {
		publicIdEntities.put("identity...", "url....");
		...
		systemIdEntities.put("identity...", "url....");
		...
	}
}	
</source>            
			</subsection>
        </section>
    </body>
</document>