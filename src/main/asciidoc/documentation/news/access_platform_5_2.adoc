[[releasenotes_5_2]]
= DataNucleus AccessPlatform 5.2 Release Notes
:_basedir: ../../
:_imagesdir: images/

The 5.2 release of AccessPlatform is available under the link:../license.html[Apache 2 license] from our link:../../download.html[download page] 


_Version 5.2_ includes the following over 5.1

* Upgrade to the bytecode enhancement contract to remove unneeded fields/methods (requires re-enhancement).
* Upgrade to the bytecode enhancement contract to improve handling of cloning of persistable objects.
* Implementation of more methods for JDOQLTyped query.
* Upgrade to Apache POI v4.0 (Excel/OOXML datastores)
* Upgrade to ASM v7.0 (Java 10/11 support)
* Support for Java 11, 12, 13


== Future Plans

* __5.2.3 Dec 2019?__


- - -

== DataNucleus AccessPlatform 5.2.2

__Oct 1st 2019__ : _Version 5.2.2_ includes the following changes

=== Enhancements

* https://github.com/datanucleus/datanucleus-core/issues/322[datanucleus-core-322] - Support for Java 13 and Java 14 bytecode
* https://github.com/datanucleus/datanucleus-api-jpa/issues/112[datanucleus-api-jpa-112] - Some JPA Query supportedHints are missing currently
* https://github.com/datanucleus/datanucleus-cassandra/issues/36[datanucleus-cassandra-36] - Support load balancing policy


=== Bugs

* https://github.com/datanucleus/datanucleus-core/issues/321[datanucleus-core-321] - Multitenancy query cache problem
* https://github.com/datanucleus/datanucleus-api-jdo/issues/99[datanucleus-api-jdo-99] - Missing isConfigurable() when entering the synchronized block
* https://github.com/datanucleus/datanucleus-api-jpa/issues/113[datanucleus-api-jpa-113] - JPADataStoreCache : contains/evict don't handle single field case


- - -

== DataNucleus AccessPlatform 5.2.1

__Apr 20th 2019__ : _Version 5.2.1_ includes the following changes

=== Enhancements

* https://github.com/datanucleus/datanucleus-core/issues/319[datanucleus-core-319] - JDOQL : Change default compilation when result class and no result
* https://github.com/datanucleus/datanucleus-rdbms/issues/317[datanucleus-rdbms-317] - MapEntrySetStore : store normal and locked iterator SQL rather than SelectStatement
* https://github.com/datanucleus/datanucleus-rdbms/issues/319[datanucleus-rdbms-319] - Oracle 12 supports identity columns
* https://github.com/datanucleus/datanucleus-rdbms/issues/320[datanucleus-rdbms-320] - Change "AutoIncrement" to "Identity" in DatastoreAdapter to better match generation strategies


=== Bugs

* https://github.com/datanucleus/datanucleus-api-jdo/issues/97[datanucleus-api-jdo-97] - JDOQLTypedQuery executeResultList(Class) and executeResultUnique(Class) should allow result class but no result
* https://github.com/datanucleus/datanucleus-api-jdo/issues/98[datanucleus-api-jdo-98] - JDOQLTyped : when result class defined but no result, return "DISTINCT this"
* https://github.com/datanucleus/datanucleus-rdbms/issues/321[datanucleus-rdbms-321] - NPE in UUIDMapping when using customValueStrategy


- - -

== DataNucleus AccessPlatform 5.2.0.RELEASE

__Mar 1st 2019__ : _Version 5.2 RELEASE_ includes the following changes

=== Enhancements

* https://github.com/datanucleus/datanucleus-core/issues/317[datanucleus-core-317] - Change ExecutionContextImpl to use LinkedHashSet instead of ArrayList
* https://github.com/datanucleus/datanucleus-api-jdo/issues/95[datanucleus-api-jdo-95] - Update generics of JDOQLTypedQueryImpl method to be "? extends Number" instead of "?"
* https://github.com/datanucleus/datanucleus-api-jdo/issues/96[datanucleus-api-jdo-96] - Support further JDOQLTyped query parameter methods in javax.jdo
* https://github.com/datanucleus/datanucleus-rdbms/issues/311[datanucleus-rdbms-311] - Update to match core #317 change to FlushProcess API
* https://github.com/datanucleus/datanucleus-rdbms/issues/315[datanucleus-rdbms-315] - Make handling of column default consistent
* https://github.com/datanucleus/datanucleus-maven-plugin/issues/12[datanucleus-maven-plugin-12] - Java 9/10 compatibility to avoid using add-modules


=== Bugs

* https://github.com/datanucleus/datanucleus-core/issues/318[datanucleus-core-318] - Process dynamic fetch groups using correct field name
* https://github.com/datanucleus/datanucleus-rdbms/issues/313[datanucleus-rdbms-313] - SQLServer LOCK options for join should be after table name and before ON
* https://github.com/datanucleus/datanucleus-rdbms/issues/314[datanucleus-rdbms-314] - Pass FetchPlan through query mechanism so that it is used for complete process


- - -

== DataNucleus AccessPlatform 5.2.0.M3

__Jan 2nd 2019__ : _Version 5.2 Milestone 3_ includes the following changes

=== Enhancements

* https://github.com/datanucleus/datanucleus-core/issues/314[datanucleus-core-314] - Support for Java 11 bytecode
* https://github.com/datanucleus/datanucleus-core/issues/315[datanucleus-core-315] - When loading fields from datastore, add on version field if not yet set 
* https://github.com/datanucleus/datanucleus-api-jdo/issues/94[datanucleus-api-jdo-94] - JDOQLTypedQuery : cast to persistable subtypes needs to create QXXX expression but currently just creates PersistableExpressionImpl
* https://github.com/datanucleus/datanucleus-rdbms/issues/308[datanucleus-rdbms-308] - Change query extensions "include-soft-deletes" and "dont-restrict-discriminator" to DataNucleus namespace
* https://github.com/datanucleus/datanucleus-mongodb/issues/52[datanucleus-mongodb-52] - Support nested embedded collection
* https://github.com/datanucleus/datanucleus-mongodb/issues/53[datanucleus-mongodb-53] - Support for specifying the MongoDB replica set


=== Bugs

None

- - -

== DataNucleus AccessPlatform 5.2.0.M2

__Nov 6th 2018__ : _Version 5.2 Milestone 2_ includes the following changes

=== Enhancements

* https://github.com/datanucleus/datanucleus-core/issues/308[datanucleus-core-308] - Navigation to find VersionMetaData doesnt allow for multiple superclasses stored in same table
* https://github.com/datanucleus/datanucleus-core/issues/311[datanucleus-core-311] - Upgrade ASM to v6.2.1
* https://github.com/datanucleus/datanucleus-core/issues/312[datanucleus-core-312] - CachedPC should implement Comparable<CachedPC> so we can cache SortedMap/SortedSet fields
* https://github.com/datanucleus/datanucleus-core/issues/313[datanucleus-core-313] - DataFederation : detect the candidate class of a query and route to the appropriate StoreManager
* https://github.com/datanucleus/datanucleus-api-jdo/issues/84[datanucleus-api-jdo-84] - JDOQLTypedQuery : support StringExpression.startsWith(String, int)
* https://github.com/datanucleus/datanucleus-api-jdo/issues/85[datanucleus-api-jdo-85] - JDOQLTypedQuery : support OrderExpression.nullsFirst()/nullsLast()
* https://github.com/datanucleus/datanucleus-api-jdo/issues/86[datanucleus-api-jdo-86] - JDOQLTypedQuery : Support IfElseExpression
* https://github.com/datanucleus/datanucleus-api-jdo/issues/87[datanucleus-api-jdo-87] - JDOQLTypedQuery : Add vendor extension support for geospatial types
* https://github.com/datanucleus/datanucleus-api-jdo/issues/88[datanucleus-api-jdo-88] - JDOQLTypedQuery : Add vendor extension support for geospatial helper
* https://github.com/datanucleus/datanucleus-api-jdo/issues/89[datanucleus-api-jdo-89] - JDOQLTypedQuery : Support NumericExpression avgDistinct/sumDistinct
* https://github.com/datanucleus/datanucleus-api-jdo/issues/92[datanucleus-api-jdo-92] - JDOQLTypedQuery : Add Expression.as() to specify alias for result clauses
* https://github.com/datanucleus/datanucleus-rdbms/issues/305[datanucleus-rdbms-305] - StringTrim2Method omits some checks
* https://github.com/datanucleus/datanucleus-jdo-query/issues/13[datanucleus-jdo-query-13] - Add support for primary geospatial expressions (vendor extension)
* https://github.com/datanucleus/datanucleus-geospatial/issues/9[datanucleus-geospatial-9] - Support {Geometry}.toBinary()
* https://github.com/datanucleus/datanucleus-geospatial/issues/10[datanucleus-geospatial-10] - Support all JDOQL object-based methods for Postgis types
* https://github.com/datanucleus/datanucleus-geospatial/issues/13[datanucleus-geospatial-13] - Support invocation of method bboxTest on Geometry objects


=== Bugs

* https://github.com/datanucleus/datanucleus-api-jdo/issues/90[datanucleus-api-jdo-90] - JDOQLTypedQuery : Creation of PrimaryExpression can omit the left expression
* https://github.com/datanucleus/datanucleus-api-jdo/issues/91[datanucleus-api-jdo-91] - JDOQLTypedQuery : distinct result setting should be passed to the generic compilation
* https://github.com/datanucleus/datanucleus-api-jpa/issues/110[datanucleus-api-jpa-110] - Population of Tuple.toArray is incorrect. Missing an "i++"



- - -

== DataNucleus AccessPlatform 5.2.0.M1

__Sep 1st 2018__ : _Version 5.2 Milestone 1_ includes the following changes

=== Enhancements

* https://github.com/datanucleus/datanucleus-core/issues/261[datanucleus-core-261] - Enhancement contract : clean up "dnFieldTypes", "dnFieldFlags", and EnhancementHelper usage
* https://github.com/datanucleus/datanucleus-core/issues/264[datanucleus-core-264] - Enhancement contract : consider dropping checkAuthorizedStateManager, registerAuthorizedStateManagerClass
* https://github.com/datanucleus/datanucleus-core/issues/294[datanucleus-core-294] - Cache of array with a null element isn't handled
* https://github.com/datanucleus/datanucleus-core/issues/295[datanucleus-core-295] - XML validation sometimes comes up with "Attribute 'version' has a fixed value of '1.0'"
* https://github.com/datanucleus/datanucleus-core/issues/296[datanucleus-core-296] - Load up TypeConverters when enhancing, since a converter can make a type persistable
* https://github.com/datanucleus/datanucleus-core/issues/297[datanucleus-core-297] - Throw exception if user selects a value generation strategy that is not supported by the datastore
* https://github.com/datanucleus/datanucleus-core/issues/298[datanucleus-core-298] - Enhancement contract : clone() method should be enhanced to null dnStateManager/dnFlags
* https://github.com/datanucleus/datanucleus-core/issues/303[datanucleus-core-303] - L1/L2 cache has strings in code, should be parametrised
* https://github.com/datanucleus/datanucleus-api-jdo/issues/72[datanucleus-api-jdo-72] - XML validation sometimes comes up with "Attribute 'version' has a fixed value of '1.0'" for package.jdo, package.orm
* https://github.com/datanucleus/datanucleus-api-jdo/issues/73[datanucleus-api-jdo-73] - JDOQLTyped query doesn't use parent query, but should
* https://github.com/datanucleus/datanucleus-api-jdo/issues/75[datanucleus-api-jdo-75] - JDOQLTyped : Handle situation of result being candidate
* https://github.com/datanucleus/datanucleus-api-jdo/issues/76[datanucleus-api-jdo-76] - JDOQLTyped : Implement StringExpression.add(String)
* https://github.com/datanucleus/datanucleus-api-jdo/issues/77[datanucleus-api-jdo-77] - JDOQLTyped : Support Expression.cast
* https://github.com/datanucleus/datanucleus-api-jdo/issues/81[datanucleus-api-jdo-81] - JDOQLTyped : Implement OptionalExpression.add(Expression)
* https://github.com/datanucleus/datanucleus-api-jdo/issues/82[datanucleus-api-jdo-82] - JDOQLTyped : Support MapExpression.get() methods
* https://github.com/datanucleus/datanucleus-api-jdo/issues/83[datanucleus-api-jdo-83] - JDOQLTyped : Support Expression.instanceof()
* https://github.com/datanucleus/datanucleus-api-jpa/issues/106[datanucleus-api-jpa-106] - XML validation sometimes comes up with "Attribute 'version' has a fixed value of '1.0'" for orm.xml
* https://github.com/datanucleus/datanucleus-api-jpa/issues/109[datanucleus-api-jpa-109] - Support cos/sin/tan/acos/asin/atan/ceil/floor/log/exp/round via CriteriaBuilder
* https://github.com/datanucleus/datanucleus-rdbms/issues/259[datanucleus-rdbms-259] - Rename org.datanucleus.store.rdbms.mapping.datastore.DatastoreMapping to ColumnMapping
* https://github.com/datanucleus/datanucleus-rdbms/issues/286[datanucleus-rdbms-286] - Rename extension "datastore_mapping" to "column_mapping"
* https://github.com/datanucleus/datanucleus-rdbms/issues/287[datanucleus-rdbms-287] - Refactor "org.datanucleus.store.rdbms.mapping.datastore" to "org.datanucleus.store.rdbms.mapping.column"
* https://github.com/datanucleus/datanucleus-rdbms/issues/290[datanucleus-rdbms-290] - PostgreSQL adapter : remove block restricting the available (SQL) types
* https://github.com/datanucleus/datanucleus-rdbms/issues/291[datanucleus-rdbms-291] - Provide a mechanism for a DatastoreAdapter to set the default SQL type for a JDBC type
* https://github.com/datanucleus/datanucleus-rdbms/issues/292[datanucleus-rdbms-292] - Support sequences on MariaDB 10.3+
* https://github.com/datanucleus/datanucleus-rdbms/issues/293[datanucleus-rdbms-293] - When fetching an object with a version, set the version before the other fields
* https://github.com/datanucleus/datanucleus-rdbms/issues/295[datanucleus-rdbms-295] - Allow query to override "maxFetchDepth" via query extension
* https://github.com/datanucleus/datanucleus-rdbms/issues/296[datanucleus-rdbms-296] - Some queries with implicit 1-1 joins can result in joining again for the same thing in the SELECT
* https://github.com/datanucleus/datanucleus-rdbms/issues/297[datanucleus-rdbms-297] - Support ROUND function
* https://github.com/datanucleus/datanucleus-rdbms/issues/299[datanucleus-rdbms-299] - "include-soft-deletes" extension for JPQL is not implemented
* https://github.com/datanucleus/datanucleus-rdbms/issues/300[datanucleus-rdbms-300] - Allow omission of WHERE clause restriction on possible discriminator values
* https://github.com/datanucleus/datanucleus-rdbms/issues/301[datanucleus-rdbms-301] - Remove getNucleusConnection override since does the same as the superclass
* https://github.com/datanucleus/datanucleus-rdbms/issues/302[datanucleus-rdbms-302] - HikariCP : allow setting of idleTimeout, and prohibit setting of connectionTestQuery
* https://github.com/datanucleus/datanucleus-rdbms/issues/303[datanucleus-rdbms-303] - DBCP2 : add ability to set validationTimeout
* https://github.com/datanucleus/datanucleus-mongodb/issues/50[datanucleus-mongodb-50] - Build against Mongo Java Driver v3.8.0
* https://github.com/datanucleus/datanucleus-jodatime/issues/3[datanucleus-jodatime-3] - Support rdbms-259
* https://github.com/datanucleus/datanucleus-geospatial/issues/8[datanucleus-geospatial-8] - Support rdbms-259
* https://github.com/datanucleus/datanucleus-scala/issues/6[datanucleus-scala-6] - Support rdbms-259


=== Bugs

* https://github.com/datanucleus/datanucleus-core/issues/304[datanucleus-core-304] - When updating L2 cached object, make sure that any versioned field is also updated
* https://github.com/datanucleus/datanucleus-api-jpa/issues/105[datanucleus-api-jpa-105] - Support fix for jpa_spec issue 108 (DN javax.persistence 2.2.1)
* https://github.com/datanucleus/datanucleus-api-jpa/issues/107[datanucleus-api-jpa-107] - MetaModel SingularAttribute.isOptional can give misleading info
* https://github.com/datanucleus/datanucleus-rdbms/issues/285[datanucleus-rdbms-285] - Modifications to bulk exists logic in 5.1.10 cause it to try when using Optional
* https://github.com/datanucleus/datanucleus-rdbms/issues/288[datanucleus-rdbms-288] - Concurrency issue in JoinMapStore
* https://github.com/datanucleus/datanucleus-rdbms/issues/298[datanucleus-rdbms-298] - Too long select item alias is shortened only for select item even when used in order by



